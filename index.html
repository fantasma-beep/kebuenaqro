<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kebuenaqro</title>
    <meta name="theme-color" content="#c2410c"/>
    <meta name="description" content="Reproductor de streaming de Kebuenaqro.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.json?v=2">
    <link rel="apple-touch-icon" href="https://fantasma-beep.github.io/kebuenaqro/logo-ke-buena-web.png?v=6">
    <style>
        body {
            background-image: linear-gradient(rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.98)), url('https://fantasma-beep.github.io/kebuenaqro/494615713_1348055410294820_9029691649736311255_n.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        input[type=range]{-webkit-appearance:none;appearance:none;background:transparent;cursor:pointer;width:100%}
        input[type=range]:focus{outline:none}
        input[type=range]::-webkit-slider-runnable-track{background-color:#9a3412;border-radius:.5rem;height:.5rem}
        input[type=range]::-moz-range-track{background-color:#9a3412;border-radius:.5rem;height:.5rem}
        input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;margin-top:-6px;background-color:#fdba74;border-radius:50%;height:1.25rem;width:1.25rem;border:2px solid #c2410c}
        input[type=range]::-moz-range-thumb{border:none;border-radius:50%;background-color:#fdba74;height:1.25rem;width:1.25rem;border:2px solid #c2410c}
        @keyframes scroll {from { transform: translateX(0); } to { transform: translateX(-50%); }}
        .animate-scroll {animation: scroll 60s linear infinite;}
        #splash-screen {transition: opacity 0.5s ease-out;}
        #banner-list img {width: 100%; height: 100%; object-fit: contain;}
    </style>
</head>
<body class="bg-slate-900 text-slate-200 flex items-center justify-center min-h-screen font-sans antialiased p-4">

<!-- SPLASH SCREEN -->
<div id="splash-screen" class="fixed inset-0 bg-slate-900 flex flex-col justify-center items-center z-50">
    <img src="https://fantasma-beep.github.io/kebuenaqro/logo-ke-buena-web.png?v=6" alt="Logo Kebuena" class="w-64">
    <p class="text-2xl font-bold text-white mt-4">Kebuena Querétaro</p>
</div>

<!-- MAIN CONTENT -->
<div id="main-content" class="w-full max-w-5xl mx-auto opacity-0 transition-opacity duration-500">
    <!-- Aquí va toda tu UI: banners, reproductores, noticias, botones, etc. -->
</div>

<script>
    // --- REGISTRO DEL SERVICE WORKER ---
    if ('serviceWorker' in navigator && (location.protocol === 'http:' || location.protocol === 'https:')) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
                .then(reg => console.log('SW registrado con éxito:', reg.scope))
                .catch(err => console.error('Error al registrar SW:', err));
        });
    }

    // --- INSTALACIÓN PWA ---
    const installBtn = document.getElementById('install-btn');
    const iosInstallBanner = document.getElementById('ios-install-banner');
    let deferredPrompt;

    const isIOS = () => /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    const isAppInstalled = () => window.matchMedia('(display-mode: standalone)').matches;

    window.addEventListener('appinstalled', () => installBtn?.classList.add('hidden'));
    window.addEventListener('beforeinstallprompt', (e) => {
        if (isAppInstalled()) return;
        e.preventDefault();
        deferredPrompt = e;
        installBtn?.classList.remove('hidden');
    });

    installBtn?.addEventListener('click', async () => { deferredPrompt?.prompt(); });
    if (isIOS() && !isAppInstalled()) iosInstallBanner?.classList.remove('hidden');

    // --- SPLASH SCREEN ---
    window.addEventListener('DOMContentLoaded', () => {
        const splash = document.getElementById('splash-screen');
        const main = document.getElementById('main-content');
        setTimeout(() => {
            splash?.classList.add('opacity-0');
            setTimeout(() => splash?.classList.add('hidden'), 500);
            main?.classList.remove('opacity-0');
        }, 2000);

        // --- Aquí puedes inicializar tus reproductores, banners y noticias ---
        // initializePlayer({...});
        // populateBanners();
        // populateNews();
    });
</script>
</body>
</html>
